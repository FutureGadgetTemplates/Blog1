---
layout: page
title: Search
permalink: /search/
---

<div class="search-page">
  <form class="search-form-page" action="" method="get">
    <input type="search" id="search-page-input" name="q" placeholder="Search articles..." autofocus>
    <button type="submit">Search</button>
  </form>

  <div id="search-page-results"></div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const searchInput = document.getElementById('search-page-input');
  const resultsContainer = document.getElementById('search-page-results');
  const posts = [
    {% for post in site.posts %}
    {
      title: {{ post.title | jsonify }},
      url: "{{ post.url | relative_url }}",
      date: "{{ post.date | date: '%B %d, %Y' }}",
      excerpt: {{ post.excerpt | strip_html | truncate: 200 | jsonify }},
      categories: {{ post.categories | jsonify }},
      tags: {{ post.tags | jsonify }}
    }{% unless forloop.last %},{% endunless %}
    {% endfor %}
  ];

  // Get query from URL
  const urlParams = new URLSearchParams(window.location.search);
  const query = urlParams.get('q');

  if (query) {
    searchInput.value = query;
    performSearch(query);
  }

  searchInput.addEventListener('input', function() {
    performSearch(this.value);
  });

  function performSearch(query) {
    if (!query || query.length < 2) {
      resultsContainer.innerHTML = '<p class="search-hint">Enter at least 2 characters to search.</p>';
      return;
    }

    const results = posts.filter(function(post) {
      const searchText = (post.title + ' ' + post.excerpt + ' ' + post.categories.join(' ') + ' ' + post.tags.join(' ')).toLowerCase();
      return searchText.includes(query.toLowerCase());
    });

    displayResults(results, query);
  }

  function displayResults(results, query) {
    if (results.length === 0) {
      resultsContainer.innerHTML = '<p class="no-results">No posts found for "' + query + '"</p>';
      return;
    }

    let html = '<p class="results-count">' + results.length + ' result' + (results.length !== 1 ? 's' : '') + ' found</p>';
    html += '<div class="search-results-list">';

    results.forEach(function(post) {
      html += '<article class="search-result-item">';
      html += '<h3><a href="' + post.url + '">' + post.title + '</a></h3>';
      html += '<p class="search-result-meta">' + post.date + '</p>';
      html += '<p class="search-result-excerpt">' + post.excerpt + '</p>';
      html += '</article>';
    });

    html += '</div>';
    resultsContainer.innerHTML = html;
  }
});
</script>

<style>
.search-page {
  max-width: 800px;
  margin: 0 auto;
}
.search-form-page {
  display: flex;
  gap: 1rem;
  margin-bottom: 2rem;
}
.search-form-page input {
  flex: 1;
  padding: 1rem;
  font-size: var(--text-lg);
  border: 2px solid var(--color-border);
  border-radius: var(--radius);
}
.search-form-page input:focus {
  outline: none;
  border-color: var(--color-primary);
}
.search-form-page button {
  padding: 1rem 2rem;
  background: var(--color-primary);
  color: white;
  font-weight: 500;
  border-radius: var(--radius);
  cursor: pointer;
}
.search-hint,
.no-results {
  text-align: center;
  color: var(--color-text-light);
  padding: 2rem;
}
.results-count {
  color: var(--color-text-muted);
  margin-bottom: 1.5rem;
}
.search-result-item {
  padding: 1.5rem 0;
  border-bottom: 1px solid var(--color-border-light);
}
.search-result-item h3 {
  margin-bottom: 0.5rem;
}
.search-result-item h3 a {
  color: var(--color-text);
}
.search-result-item h3 a:hover {
  color: var(--color-primary);
}
.search-result-meta {
  font-size: var(--text-sm);
  color: var(--color-text-muted);
  margin-bottom: 0.5rem;
}
.search-result-excerpt {
  color: var(--color-text-light);
}
</style>
